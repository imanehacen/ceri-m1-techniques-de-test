version: 2.1
orbs:
        maven: circleci/maven@1.3.0
        codecov: codecov/codecov@3.2.2

machine:
    java:
        version: 'oraclejdk8'

steps: 

        run:
                steps:
                - uses: actions/checkout@master
                - uses: codecov/codecov-action@v2
                with:
                        token: ${{ secrets.CODECOV_TOKEN }} # not required for public repos
                        files: ./coverage1.xml,./coverage2.xml # optional
                        flags: unittests # optional
                        name: codecov-umbrella # optional
                        fail_ci_if_error: true # optional (default = false)
                        verbose: true # optional (default = false)
                name : test
                command : test
                

     
         

build-deploy:
        jobs:
                - build : 
                        filters: 
                                branches:
                                        only : main
workflows:
        maven_test:
                jobs:
                        - maven/test:
                                command: '-X verify'
        upload-to-codecov:
                jobs:
                        - checkout
                        - codecov/upload

                       
                       
                   
